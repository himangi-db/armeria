{"version":3,"file":"component---src-pages-docs-client-http-mdx-4c10c82427ca5cc03e68.js","mappings":"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","sources":["webpack://armeria-site/./src/pages/docs/client-http.mdx","webpack://armeria-site/./src/layouts/docs.tsx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/armeria/armeria/site/src/layouts/docs.tsx\";\nexport const pageTitle = \"Calling an HTTP service\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  pageTitle,\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"calling-an-http-service\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h1\" {...{\n        \"href\": \"#calling-an-http-service\",\n        \"aria-label\": \"calling an http service permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Calling an HTTP service`}</h1>\n    <h6 {...{\n      \"className\": \"inlinePageToc\",\n      \"role\": \"navigation\"\n    }}>{`Table of contents`}</h6>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#decorating-a-webclient\"\n        }}>{`Decorating a WebClient`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#service-discovery-with-webclient\"\n        }}>{`Service discovery with WebClient`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#configuring-clientfactory\"\n        }}>{`Configuring ClientFactory`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#see-also\"\n        }}>{`See also`}</a></li>\n    </ul>\n    <p>{`You can create a `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{` with a base URI and send a request with a relative path.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.client.WebClient;\nimport com.linecorp.armeria.common.AggregatedHttpResponse;\nimport com.linecorp.armeria.common.HttpHeaderNames;\nimport com.linecorp.armeria.common.HttpMethod;\nimport com.linecorp.armeria.common.RequestHeaders;\n\nWebClient webClient = WebClient.of(\"http://example.com/\");\n\n// Send a simple GET request.\nAggregatedHttpResponse res1 = webClient.get(\"/foo/bar.txt\").aggregate().join();\n\n// Send a GET request with an additional header.\nRequestHeaders getJson = RequestHeaders.of(HttpMethod.GET, \"/foo/bar.json\",\n                                           HttpHeaderNames.ACCEPT, \"application/json\");\n\nAggregatedHttpResponse res2 = webClient.execute(getJson).aggregate().join();\n\n// Send a simple POST request encoded in UTF-8.\nAggregatedHttpResponse res3 = webClient.post(\"/upload\", \"{ \\\\\"foo\\\\\": \\\\\"bar\\\\\" }\")\n                                       .aggregate().join();\n`}</code></pre>\n    <p>{`You can also create a `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{` without a base URI and send a request with an absolute URI.\nThe ad-hoc `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{` would be useful in the following cases:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Sending requests to arbitrary endpoints`}</li>\n      <li parentName=\"ul\">{`Building a proxy server`}</li>\n      <li parentName=\"ul\">{`Handling redirected requests`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.common.HttpStatus;\nimport com.linecorp.armeria.common.HttpHeaderNames;\n\n// Create a WebClient without a base URI.\nWebClient webClient = WebClient.of();\n\n// Send a request with an absolute URI.\nAggregatedHttpResponse res1 = webClient.get(\"http://example.com/foo/bar.txt\")\n                                       .aggregate()\n                                       .join();\n\n// Send a GET request with an authority header.\nHttpRequest request = HttpRequest.of(RequestHeaders.builder()\n                                                   .scheme(SessionProtocol.HTTP)\n                                                   .authority(\"example.com\")\n                                                   .method(HttpMethod.GET)\n                                                   .path(\"/foo/bar.txt\")\n                                                   .build());\nAggregatedHttpResponse res2 = webClient.execute(request).aggregate().join();\n\n// Handle a redirected request\nAggregatedHttpResponse redirected = webClient.get(\"http://example.com/redirect\")\n                                             .aggregate()\n                                             .join();\nassert redirected.status() == HttpStatus.TEMPORARY_REDIRECT;\nString location = redirected.headers().get(HttpHeaderNames.LOCATION);\nAggregatedHttpResponse actual = webClient.get(location).aggregate().join();\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"decorating-a-webclient\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#decorating-a-webclient\",\n        \"aria-label\": \"decorating a webclient permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Decorating a WebClient`}</h2>\n    <p>{`You can enrich your `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{` by decorating it with decorators.\nA decorator wraps another client to intercept an outgoing request or an incoming response.\nA lot of core features such as logging, metrics and distributed tracing are implemented as decorators.`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://BraveClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/brave/BraveClient.html\"\n        }}>{`type://BraveClient`}</a>{` which `}<a parentName=\"li\" {...{\n          \"href\": \"/docs/advanced-zipkin\"\n        }}>{`traces`}</a>{` outbound requests using\n`}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/openzipkin/brave\"\n        }}>{`Brave`}</a>{`.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://CircuitBreakerClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClient.html\"\n        }}>{`type://CircuitBreakerClient`}</a>{` which `}<a parentName=\"li\" {...{\n          \"href\": \"/docs/client-circuit-breaker\"\n        }}>{`opens a circuit`}</a>{` on failed responses.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://CookieClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/cookie/CookieClient.html\"\n        }}>{`type://CookieClient`}</a>{` which stores cookies of responses using `}<a parentName=\"li\" {...{\n          \"href\": \"type://CookieJar:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/cookie/CookieJar.html\"\n        }}>{`type://CookieJar`}</a>{`.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://ConcurrencyLimitingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/limit/ConcurrencyLimitingClient.html\"\n        }}>{`type://ConcurrencyLimitingClient`}</a>{` which limits the concurrent number of active requests.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://ContentPreviewingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/logging/ContentPreviewingClient.html\"\n        }}>{`type://ContentPreviewingClient`}</a>{` which\n`}<a parentName=\"li\" {...{\n          \"href\": \"/docs/advanced-structured-logging/#enabling-content-previews\"\n        }}>{`previews the content`}</a>{` of\nrequests and responses.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://DecodingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/encoding/DecodingClient.html\"\n        }}>{`type://DecodingClient`}</a>{` which decompresses a\n`}<a parentName=\"li\" {...{\n          \"href\": \"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding\"\n        }}>{`compressed`}</a>{` response.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://MetricCollectingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/metric/MetricCollectingClient.html\"\n        }}>{`type://MetricCollectingClient`}</a>{` which\n`}<a parentName=\"li\" {...{\n          \"href\": \"/docs/advanced-metrics#collecting-client-side-metrics\"\n        }}>{`collects metrics`}</a>{` using\n`}<a parentName=\"li\" {...{\n          \"href\": \"https://micrometer.io/\"\n        }}>{`Micrometer`}</a>{`.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://LoggingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/logging/LoggingClient.html\"\n        }}>{`type://LoggingClient`}</a>{` which logs requests and responses.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://RetryingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryingClient.html\"\n        }}>{`type://RetryingClient`}</a>{` which `}<a parentName=\"li\" {...{\n          \"href\": \"/docs/client-retry\"\n        }}>{`automatically retries`}</a>{` failed requests.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import brave.http.HttpTracing;\nimport com.linecorp.armeria.client.brave.BraveClient;\nimport com.linecorp.armeria.client.circuitbreaker.CircuitBreaker;\nimport com.linecorp.armeria.client.circuitbreaker.CircuitBreakerClient;\nimport com.linecorp.armeria.client.circuitbreaker.CircuitBreakerRule;\nimport com.linecorp.armeria.client.cookie.CookieClient;\nimport com.linecorp.armeria.client.encoding.DecodingClient;\nimport com.linecorp.armeria.client.limit.ConcurrencyLimitingClient;\nimport com.linecorp.armeria.client.logging.ContentPreviewingClient;\nimport com.linecorp.armeria.client.logging.LoggingClient;\nimport com.linecorp.armeria.client.metric.MetricCollectingClient;\nimport com.linecorp.armeria.client.retry.RetryRule;\nimport com.linecorp.armeria.client.retry.RetryingClient;\nimport com.linecorp.armeria.common.metric.MeterIdPrefixFunction;\n\nHttpTracing tracing = ...;\nWebClient.builder()\n         .decorator(BraveClient.newDecorator(tracing))\n         .decorator(CircuitBreakerClient.newDecorator(\n             CircuitBreaker.ofDefaultName(), CircuitBreakerRule.onServerErrorStatus()))\n         .decorator(ConcurrencyLimitingClient.newDecorator(64))\n         .decorator(ContentPreviewingClient.newDecorator(128))\n         .decorator(CookieClient.newDecorator())\n         .decorator(DecodingClient.newDecorator())\n         .decorator(MetricCollectingClient.newDecorator(\n             MeterIdPrefixFunction.ofDefault(\"armeria.client\")))\n         .decorator(LoggingClient.newDecorator())\n         .decorator(RetryingClient.newDecorator(RetryRule.onUnprocessed()))\n         ...\n         .build();\n`}</code></pre>\n    <p>{`Please see `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/client-decorator\"\n      }}>{`Decorating a client`}</a>{` to learn how it works.`}</p>\n    <h2 {...{\n      \"id\": \"service-discovery-with-webclient\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#service-discovery-with-webclient\",\n        \"aria-label\": \"service discovery with webclient permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Service discovery with WebClient`}</h2>\n    <p>{`Armeria provides the various `}<a parentName=\"p\" {...{\n        \"href\": \"https://microservices.io/patterns/client-side-discovery.html\"\n      }}>{`service discovery`}</a>{`\nmechanisms with `}<a parentName=\"p\" {...{\n        \"href\": \"type://EndpointGroup:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointGroup.html\"\n      }}>{`type://EndpointGroup`}</a>{`,\nfrom Kubernetes-style `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/client-service-discovery#dns-based-service-discovery-with-dnsendpointgroup\"\n      }}>{`DNS records`}</a>{`\nto `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/client-service-discovery#consul-based-service-discovery-with-consulendpointgroup\"\n      }}>{`Consul`}</a>{`.\nRequests are sent to dynamically retrieved `}<a parentName=\"p\" {...{\n        \"href\": \"typeplural://Endpoint:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html\"\n      }}>{`typeplural://Endpoint`}</a>{` by specifying an `}<a parentName=\"p\" {...{\n        \"href\": \"type://EndpointGroup:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointGroup.html\"\n      }}>{`type://EndpointGroup`}</a>{`\nto a `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.client.endpoint.dns.DnsServiceEndpointGroup;\n\n// Retrieve the Endpoint list from SRV records\nDnsServiceEndpointGroup group =\n    DnsServiceEndpointGroup.of(\"k8s.default.svc.cluster.local.\");\n    \n// Filter out unhealthy endpoints\nHealthCheckedEndpointGroup healthCheckedGroup =\n        HealthCheckedEndpointGroup.of(group, \"/monitor/l7check\");\n        \nWebClient.builder(SessionProtocol.HTTP, healthCheckedGroup)\n         ...\n         .build();\n`}</code></pre>\n    <p>{`Please check `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/client-service-discovery\"\n      }}>{`Client-side load balancing and service discovery`}</a>{`\nfor more information.`}</p>\n    <h2 {...{\n      \"id\": \"configuring-clientfactory\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#configuring-clientfactory\",\n        \"aria-label\": \"configuring clientfactory permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Configuring ClientFactory`}</h2>\n    <p>{`A `}<a parentName=\"p\" {...{\n        \"href\": \"type://ClientFactory:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactory.html\"\n      }}>{`type://ClientFactory`}</a>{` manages connections and protocol-specific properties.\nYou can build your own `}<a parentName=\"p\" {...{\n        \"href\": \"type://ClientFactory:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactory.html\"\n      }}>{`type://ClientFactory`}</a>{` using `}<a parentName=\"p\" {...{\n        \"href\": \"type://ClientFactoryBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactoryBuilder.html\"\n      }}>{`type://ClientFactoryBuilder`}</a>{` and\nset it through `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClientBuilder#factory()\"\n      }}>{`type://WebClientBuilder#factory()`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.client.ClientFactory;\n// Create a customized ClientFactory\nClientFactory clientFactory =\n    ClientFactory.builder()\n                 // Increase the connect timeout from 3.2s to 10s.\n                 .connectTimeout(Duration.ofSeconds(10))\n                 .\n                 .build();\n\nWebClient client =\n        WebClient.builder()\n                 .factory(clientFactory)\n                 .build();\n`}</code></pre>\n    <p>{`Please check `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/client-factory\"\n      }}>{`Customizing a `}<inlineCode parentName=\"a\">{`ClientFactory`}</inlineCode>{` with `}<inlineCode parentName=\"a\">{`ClientFactoryBuilder`}</inlineCode></a>{`\nfor the details.`}</p>\n    <h2 {...{\n      \"id\": \"see-also\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#see-also\",\n        \"aria-label\": \"see also permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`See also`}</h2>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/docs/client-retrofit\"\n        }}>{`Retrofit integration`}</a></li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import { RouteComponentProps } from '@reach/router';\nimport { graphql, useStaticQuery } from 'gatsby';\nimport React from 'react';\n\nimport docsIndex from '../pages/docs/toc.json';\nimport MdxLayout from './mdx';\n\ninterface DocsLayoutProps extends RouteComponentProps {\n  pageContext: any;\n  pageTitle: string;\n}\n\nconst DocsLayout: React.FC<DocsLayoutProps> = (props) => {\n  const {\n    allMdx: { nodes: candidateMdxNodes },\n  } = useStaticQuery(graphql`\n    query {\n      allMdx(filter: { fileAbsolutePath: { glob: \"**/src/pages/docs/**\" } }) {\n        nodes {\n          tableOfContents(maxDepth: 1)\n          excerpt(pruneLength: 256, truncate: true)\n          parent {\n            ... on File {\n              sourceInstanceName\n              name\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    <MdxLayout\n      {...props}\n      candidateMdxNodes={candidateMdxNodes}\n      index={docsIndex}\n      prefix=\"docs\"\n      pageTitleSuffix=\"Armeria documentation\"\n    />\n  );\n};\n\nexport default DocsLayout;\n"],"names":["pageTitle","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","candidateMdxNodes","useStaticQuery","allMdx","nodes","index","docsIndex","prefix","pageTitleSuffix"],"sourceRoot":""}